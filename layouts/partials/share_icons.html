{{- $pageurl := .Permalink }}
{{- $title := .Title }}

{{- $.Scratch.Set "tags" ""}}

{{- with .Params.Tags }}
{{- $hashtags := newScratch}}
{{- range . }}{{ $hashtags.Add "tags" (slice (replaceRE "(\\s)" "" . ))}}{{end}}
{{- $.Scratch.Set "tags" (delimit ($hashtags.Get "tags") ",") }}
{{- end -}}

{{- $custom := false }}
{{- $ShareButtons := (.Param "ShareButtons")}}
{{- with $ShareButtons }}{{ $custom = true }}{{ end }}

<div class="share-buttons">
    {{- if (cond ($custom) (in $ShareButtons "twitter") (true)) }}
    <a target="_blank" rel="noopener noreferrer" aria-label="share {{ $title | plainify }} on twitter"
        href="https://twitter.com/intent/tweet/?text={{ $title }}&amp;url={{ $pageurl }}&amp;hashtags={{- $.Scratch.Get "tags" -}}">
        <div class="social-icons">
            <a href="https://twitter.com/intent/tweet/?text={{ $title }}&amp;url={{ $pageurl }}&amp;hashtags={{- $.Scratch.Get "tags" -}}" title="Twitter">
                {{ safeHTML (index $.svg "twitter" | default $.svg.default) }}
            </a>
        </div>
    </a>
    {{- end }}

    {{- if (cond ($custom) (in $ShareButtons "linkedin") (true)) }}
    <a target="_blank" rel="noopener noreferrer" aria-label="share {{ $title | plainify }} on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url={{ $pageurl }}&amp;title={{ $title }}&amp;summary={{ $title }}&amp;source={{ $pageurl }}">
        <div class="social-icons">
            <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url={{ $pageurl }}&amp;title={{ $title }}&amp;summary={{ $title }}&amp;source={{ $pageurl }}" title="LinkedIn">
                {{ safeHTML (index $.svg "linkedin" | default $.svg.default) }}
            </a>
        </div>
    </a>
    {{- end }}

    {{- if (cond ($custom) (in $ShareButtons "reddit") (true)) }}
    <a target="_blank" rel="noopener noreferrer" aria-label="share {{ $title | plainify }} on reddit"
        href="https://reddit.com/submit?url={{ $pageurl }}&title={{ $title }}">
        <div class="social-icons">
            <a href="https://reddit.com/submit?url={{ $pageurl }}&title={{ $title }}" title="Reddit">
                {{ safeHTML (index $.svg "reddit" | default $.svg.default) }}
            </a>
        </div>
    </a>
    {{- end }}

    {{- if (cond ($custom) (in $ShareButtons "facebook") (true)) }}
    <a target="_blank" rel="noopener noreferrer" aria-label="share {{ $title | plainify }} on facebook"
        href="https://facebook.com/sharer/sharer.php?u={{ $pageurl }}">
        <div class="social-icons">
            <a href="https://facebook.com/sharer/sharer.php?u={{ $pageurl }}" title="Facebook">
                {{ safeHTML (index $.svg "facebook" | default $.svg.default) }}
            </a>
        </div>
    </a>
    {{- end }}

    {{- if (cond ($custom) (in $ShareButtons "whatsapp") (true)) }}
    <a target="_blank" rel="noopener noreferrer" aria-label="share {{ $title | plainify }} on whatsapp"
        href="https://api.whatsapp.com/send?text={{ $title }}%20-%20{{ $pageurl }}">
        <div class="social-icons">
            <a href="https://api.whatsapp.com/send?text={{ $title }}%20-%20{{ $pageurl }}" title="WhatsApp">
                {{ safeHTML (index $.svg "whatsapp" | default $.svg.default) }}
            </a>
        </div>
    </a>
    {{- end }}

    {{- if (cond ($custom) (in $ShareButtons "telegram") (true)) }}
    <a target="_blank" rel="noopener noreferrer" aria-label="share {{ $title | plainify }} on telegram"
        href="https://telegram.me/share/url?text={{ $title }}&amp;url={{ $pageurl }}">
        <div class="social-icons">
            <a href="https://telegram.me/share/url?text={{ $title }}&amp;url={{ $pageurl }}" title="Telegram">
                {{ safeHTML (index $.svg "telegram" | default $.svg.default) }}
            </a>
        </div>
    </a>
    {{- end }}
</div>
